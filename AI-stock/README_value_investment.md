# A股价值投资分析系统使用说明

## 功能概述

本系统在原有AI财报分析系统基础上，新增了A股价值投资分析功能，通过公开API获取股票价值投资相关数据，提供基础分析和可视化功能。

## 核心功能

### 1. 价值投资数据分析
- **实时行情数据获取**：通过新浪财经API获取股票实时价格、涨跌幅等基本信息
- **财务指标分析**：获取P/E、P/B、ROE、负债率等关键财务指标
- **价值评分系统**：基于价值投资理念对股票进行0-100分评分
- **投资建议生成**：根据评分和财务指标提供投资建议

### 2. 可视化图表生成
- **雷达图**：展示股票各项价值投资指标的评分
- **趋势图**：模拟股价历史趋势
- **评分分解图**：展示价值评分的构成
- **对比图**：与行业平均水平的对比

### 3. 数据缓存机制
- **智能缓存**：避免频繁调用API，提高响应速度
- **自动更新**：缓存过期后自动获取最新数据
- **数据持久化**：分析结果和图表数据本地保存

## API接口

### 新增的后端接口

#### 1. 价值投资分析
```
GET /api/value-investment/:stockCode
```
获取指定股票的完整价值投资分析数据

**参数：**
- `stockCode`: 股票代码（如：000538）

**返回数据：**
```json
{
  "data": {
    "code": "000538",
    "name": "云南白药",
    "price": 55.82,
    "value_score": 70,
    "recommendation": "建议买入 - 具有投资价值，财务状况良好",
    "pe_ratio": 15.50,
    "roe": 12.50,
    "debt_ratio": 45.20,
    // ... 其他指标
  }
}
```

#### 2. 股票基本信息
```
GET /api/stock-info/:stockCode
```
获取股票基本信息

#### 3. 财务指标
```
GET /api/financial-metrics/:stockCode
```
获取财务指标数据

#### 4. 批量分析
```
POST /api/analyze-value
```
批量分析多只股票

**请求体：**
```json
{
  "stock_codes": ["000538", "600036", "000858"]
}
```

## 使用方法

### 1. 运行完整系统
```bash
# 启动完整系统（包含前端界面）
go run main.go value_investment.go cache_manager.go chart_generator.go

# 或使用编译后的程序
./ai-stock-value
```

访问 http://localhost:8080 使用完整界面

### 2. 命令行测试
```bash
# 编译测试程序
go build -o yunnan-test yunnan_test.go value_investment.go cache_manager.go chart_generator.go test_value_investment.go

# 运行云南白药专项测试
./yunnan-test
```

### 3. API接口测试
```bash
# 测试云南白药
curl http://localhost:8080/api/value-investment/000538

# 测试招商银行
curl http://localhost:8080/api/value-investment/600036

# 批量分析
curl -X POST http://localhost:8080/api/analyze-value \
  -H "Content-Type: application/json" \
  -d '{"stock_codes": ["000538", "600036"]}'
```

## 价值投资评分算法

### 评分维度（总分100分）
1. **P/E比率**（20分）：15-25倍为最佳
2. **ROE**（20分）：15%以上为优秀
3. **负债率**（15分）：低于30%为健康
4. **流动比率**（10分）：大于1.5为健康
5. **营收增长**（10分）：10%以上为优秀
6. **利润增长**（10分）：15%以上为优秀
7. **股息率**（5分）：3%以上为优秀

### 投资建议标准
- **80分以上**：强烈建议买入
- **60-79分**：建议买入
- **40-59分**：建议持有
- **20-39分**：建议观望
- **20分以下**：建议回避

## 测试结果

### 云南白药（000538）分析结果
- **当前价格**：55.82元
- **价值评分**：70/100
- **投资建议**：建议买入
- **核心优势**：
  - P/E比率合理（15.50倍）
  - 财务结构稳健（负债率45.20%）
  - 毛利率较高（35.60%）
  - 提供稳定股息回报（2.10%）

### 其他测试股票
- 招商银行（600036）：70分，建议买入
- 五粮液（000858）：70分，建议买入
- 恒瑞医药（600276）：70分，建议买入

## 生成的文件

### 报告文件
- `reports/yunnan_baiyao_report.json`：云南白药详细分析报告
- `reports/{stock_code}_analysis.json`：各股票分析结果

### 图表文件
- `charts/{stock_code}_radar_chart.json`：雷达图数据
- `charts/{stock_code}_trend_chart.json`：趋势图数据
- `charts/{stock_code}_score_chart.json`：评分分解图数据

### 缓存文件
- `cache/value_investment/`：API数据缓存

## 注意事项

1. **数据源限制**：使用免费API，可能存在调用频率限制
2. **数据延迟**：部分数据可能存在延迟，不是实时数据
3. **投资风险**：本系统提供的分析结果仅供参考，不构成投资建议
4. **网络依赖**：需要网络连接获取实时数据
5. **缓存机制**：首次调用较慢，后续调用会使用缓存数据

## 技术架构

### 后端技术栈
- **Go语言**：主要开发语言
- **Gin框架**：Web框架
- **多API源**：新浪财经、东方财富等
- **缓存系统**：本地文件缓存
- **图表生成**：JSON格式图表数据

### 前端技术栈
- **Vue.js 3**：前端框架
- **Element Plus**：UI组件库
- **ECharts**：图表可视化（可选）

### 数据流程
1. 用户输入股票代码
2. 系统从多个API源获取数据
3. 数据清洗和标准化处理
4. 价值投资评分计算
5. 生成图表数据
6. 返回分析结果

## 扩展功能

系统设计支持以下扩展：
1. **更多数据源**：可接入其他财经API
2. **行业对比**：同行业公司对比分析
3. **历史分析**：历史数据趋势分析
4. **投资组合**：多股票组合分析
5. **风险预警**：基于指标变化的风险提示

---

**免责声明**：本系统仅供学习和研究使用，不构成任何投资建议。投资有风险，请谨慎决策。
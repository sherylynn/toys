# mac-script 项目需求文档

## 项目目标
实现一个基于Go语言的ADB无线调试工具，用于自动扫描、连接和管理Android设备。

## 功能需求

### 1. ADB密钥管理
- 在程序根目录的adb_keys目录下管理ADB密钥
- 支持密钥的自动生成和复用
- 参考 electricbubble/gadb 项目的密钥管理实现

### 2. 设备扫描
- 自动获取本机IP地址（192.168.x.x网段）
- 扫描局域网内开放5555端口的设备
- 支持并发扫描以提高效率
- 显示扫描进度和结果

### 3. 设备连接
- 支持通过IP地址连接设备
- 实现ADB认证和握手过程
- 获取并显示设备信息（型号等）
- 支持自动重连

### 4. 历史记录管理
- 记录成功连接的设备IP地址
- 优先尝试连接历史IP地址
- 支持同网段设备的快速重连

### 5. 错误处理
- 完善的错误提示和处理机制
- 网络连接超时处理
- 设备认证失败处理

## 技术参考
- electricbubble/gadb: https://github.com/electricbubble/gadb
  - 参考其ADB协议实现
  - 参考密钥管理机制
  - 参考设备认证流程

## 改进方向
1. 优化密钥管理，确保密钥能正确保存和复用
2. 改进设备认证流程，提高连接成功率
3. 完善错误处理机制
4. 优化扫描性能
5. 提供更友好的用户提示信息
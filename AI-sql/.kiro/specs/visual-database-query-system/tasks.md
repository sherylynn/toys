# 实施计划

- [ ] 1. 项目结构初始化和核心配置
  - 创建Go模块和基本目录结构（backend/, frontend/, docs/）
  - 配置Go依赖项（gin, gorm, jwt-go, excelize等）
  - 设置基本的配置管理和环境变量处理
  - 创建开发环境启动脚本
  - _需求: 6.1, 6.2_

- [ ] 2. 数据模型和数据库初始化

- [ ] 2.1 实现用户数据模型和数据库结构
  - 创建User、DatabaseConnection、QueryHistory结构体
  - 实现GORM数据库迁移和初始化逻辑
  - 编写用户数据模型的单元测试
  - _需求: 1.1, 1.3, 6.2, 6.3_

- [ ] 2.2 实现SQLite演示数据库初始化
  - 创建演示数据表结构（用户、订单、产品等）
  - 实现演示数据插入逻辑
  - 编写数据库初始化的测试用例
  - _需求: 6.3, 6.4, 6.5_

- [ ] 3. 用户认证系统实现

- [ ] 3.1 实现JWT认证服务
  - 创建JWT token生成和验证功能
  - 实现密码哈希和验证（bcrypt）
  - 编写认证服务的单元测试
  - _需求: 1.1, 1.4_

- [ ] 3.2 实现用户管理API端点
  - 创建登录API（POST /api/auth/login）
  - 创建用户注册API（POST /api/auth/register，仅管理员）
  - 实现JWT中间件进行请求认证
  - 编写认证API的集成测试
  - _需求: 1.1, 1.2, 1.3, 1.5_

- [ ] 4. 数据库连接和元数据服务

- [ ] 4.1 实现数据库连接管理器
  - 创建数据库连接池管理
  - 实现多种数据库类型支持（SQLite, MySQL, PostgreSQL）
  - 编写连接管理器的单元测试
  - _需求: 5.1, 5.2, 5.4_

- [ ] 4.2 实现数据库元数据获取API
  - 创建获取数据库列表API（GET /api/databases）
  - 创建获取表结构API（GET /api/databases/{id}/tables）
  - 实现表和字段信息的缓存机制
  - 编写元数据API的集成测试
  - _需求: 5.5, 2.1_

- [ ] 5. 查询构建和执行引擎

- [ ] 5.1 实现查询构建器核心逻辑
  - 创建QueryBuilder结构体和SQL生成逻辑
  - 实现SELECT、WHERE、ORDER BY、LIMIT子句生成
  - 实现查询条件的类型验证和转换
  - 编写查询构建器的单元测试
  - _需求: 3.1, 3.2_

- [ ] 5.2 实现查询执行API端点
  - 创建查询构建API（POST /api/query/build）
  - 实现查询结果的分页和限制机制
  - 添加查询执行的错误处理和验证
  - 编写查询执行API的集成测试
  - _需求: 3.3, 3.4, 3.5_

- [ ] 6. Excel导出功能实现

- [ ] 6.1 实现Excel文件生成服务
  - 使用excelize库创建Excel文件生成器
  - 实现查询结果到Excel格式的转换
  - 添加Excel文件的格式化和样式设置
  - 编写Excel生成服务的单元测试
  - _需求: 4.1, 4.3, 4.4_

- [ ] 6.2 实现导出API端点
  - 创建导出API（POST /api/query/export）
  - 实现文件下载的HTTP响应处理
  - 添加导出过程的错误处理
  - 编写导出API的集成测试
  - _需求: 4.2, 4.5_

- [ ] 7. 前端项目初始化和基础组件

- [ ] 7.1 创建React项目结构和配置
  - 使用Create React App创建TypeScript项目
  - 配置Ant Design、React DnD、Axios等依赖
  - 设置项目的目录结构和基础配置
  - 创建基础的路由和布局组件
  - _需求: 7.1, 7.2_

- [ ] 7.2 实现认证相关组件
  - 创建登录表单组件
  - 实现JWT token的存储和管理
  - 创建认证上下文和保护路由
  - 编写认证组件的单元测试
  - _需求: 1.1, 1.4, 1.5_

- [ ] 8. 可视化查询界面核心组件

- [ ] 8.1 实现数据库和表选择组件
  - 创建数据库选择器组件
  - 实现表和字段的树形展示组件
  - 添加表结构信息的显示和搜索功能
  - 编写数据库选择组件的单元测试
  - _需求: 2.1, 2.2_

- [ ] 8.2 实现拖拽功能核心组件
  - 使用React DnD创建可拖拽的字段组件
  - 实现查询画布的拖放区域
  - 添加拖拽过程的视觉反馈
  - 编写拖拽组件的单元测试
  - _需求: 2.2, 2.3_

- [ ] 9. 查询条件和配置组件

- [ ] 9.1 实现查询条件构建器
  - 创建条件设置的表单组件
  - 实现不同数据类型的条件输入控件
  - 添加逻辑运算符（AND/OR）的支持
  - 编写条件构建器的单元测试
  - _需求: 2.3, 2.4_

- [ ] 9.2 实现排序和限制配置组件
  - 创建排序规则设置组件
  - 实现查询结果数量限制控件
  - 添加查询配置的保存和加载功能
  - 编写配置组件的单元测试
  - _需求: 2.4, 2.5_

- [ ] 10. 查询结果展示和导出

- [ ] 10.1 实现查询结果预览组件
  - 创建数据表格展示组件
  - 实现查询结果的分页显示
  - 添加结果数据的格式化和排序
  - 编写结果展示组件的单元测试
  - _需求: 2.5, 2.6_

- [ ] 10.2 实现导出功能界面
  - 创建导出按钮和选项组件
  - 实现文件下载的前端处理逻辑
  - 添加导出进度和状态提示
  - 编写导出功能的单元测试
  - _需求: 4.1, 4.2_

- [ ] 11. 系统集成和优化

- [ ] 11.1 实现前后端API集成
  - 创建API客户端和请求拦截器
  - 实现统一的错误处理和用户提示
  - 添加请求加载状态和重试机制
  - 编写API集成的端到端测试
  - _需求: 7.3, 7.4, 7.5_

- [ ] 11.2 实现响应式设计和性能优化
  - 优化界面在不同屏幕尺寸下的显示
  - 实现查询结果的虚拟滚动优化
  - 添加组件的懒加载和代码分割
  - 编写性能测试和优化验证
  - _需求: 7.1, 7.2, 7.3_

- [ ] 12. 管理员功能和系统完善

- [ ] 12.1 实现管理员用户管理界面
  - 创建用户列表和管理组件
  - 实现用户创建、编辑、删除功能
  - 添加用户权限和角色管理
  - 编写管理员功能的集成测试
  - _需求: 1.2, 1.3_

- [ ] 12.2 实现查询历史和系统监控
  - 创建查询历史记录和展示功能
  - 实现系统使用统计和监控面板
  - 添加数据库连接状态检查
  - 编写系统监控功能的测试
  - _需求: 5.3, 5.4_

- [ ] 13. 测试完善和部署准备

- [ ] 13.1 完善端到端测试套件
  - 使用Cypress创建完整的用户流程测试
  - 测试拖拽查询的完整工作流程
  - 验证不同浏览器的兼容性
  - 编写测试文档和运行指南
  - _需求: 所有需求的综合验证_

- [ ] 13.2 准备生产部署配置
  - 创建生产环境的构建脚本
  - 实现数据库迁移和备份脚本
  - 配置日志记录和监控系统
  - 编写部署文档和运维指南
  - _需求: 系统稳定性和可维护性_
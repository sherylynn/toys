# 呼吸道病原阳性检出率可视化应用

这是一个用于可视化呼吸道病原阳性检出率的Web应用程序。它使用Node.js作为后端，Express.js作为Web框架，SQLite作为数据库，并使用Chart.js进行数据可视化。

## 技术栈

*   **后端:** Node.js, Express.js
*   **数据库:** SQLite3
*   **数据可视化:** Chart.js
*   **CSV解析:** fast-csv

## 文件结构

*   `index.html`: 前端页面，包含饼图和详情页面的HTML结构。
*   `chart.js`: Chart.js 库文件。
*   `data.csv`: 原始数据文件，包含病原体类别、检出值、医院、患者姓名、性别和年龄等信息。
*   `data.db`: SQLite 数据库文件，由后端服务在启动时根据 `data.csv` 生成。
*   `server.js`: Node.js 后端服务，负责处理数据请求、数据库操作和静态文件服务。
*   `start.sh`: 启动脚本，用于方便地启动和停止Node.js服务。
*   `.gitignore`: Git 忽略文件，包含 `node_modules/` 和 `data.db` 等不需要提交到版本控制的文件。

## 如何运行

1.  **安装依赖:**

    确保您已安装 Node.js 和 npm。然后，在项目根目录下运行以下命令安装所有必要的依赖：

    ```bash
    npm install
    ```

2.  **启动服务:**

    您可以使用提供的启动脚本来启动服务。在项目根目录下运行：

    ```bash
    ./start.sh
    ```

    这将杀死任何正在运行的Node.js实例，然后重新启动它。服务将在 `http://localhost:9999` 上运行，您可以通过 `http://bwh3.sherylynn.win:9999` 访问。

3.  **访问应用:**

    在浏览器中打开 `http://bwh3.sherylynn.win:9999` 即可访问应用程序。

## 功能

*   **饼图展示:** 首页展示呼吸道病原阳性检出率的饼图，每个扇区代表一种病原体。
*   **详情查看:** 点击饼图的任意扇区，将显示该病原体的详细病例列表，并以柱状图形式展示不同医院的病例数量。
*   **数据更新:** 如果 `data.csv` 文件发生更改，只需重新启动服务即可更新数据。
